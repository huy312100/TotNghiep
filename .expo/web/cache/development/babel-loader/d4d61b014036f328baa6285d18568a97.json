{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"E:\\\\TotNghiep\\\\TotNghiep\\\\src\\\\screens\\\\home\\\\calendar\\\\timeline_calendar\\\\TimelineCalendar.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport VirtualizedList from \"react-native-web/dist/exports/VirtualizedList\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport _ from 'lodash';\nimport moment from 'moment';\nimport React from 'react';\nimport styleConstructor from \"./Style\";\nimport DayView from \"./DayView\";\n\nvar EventCalendar = function (_React$Component) {\n  _inherits(EventCalendar, _React$Component);\n\n  var _super = _createSuper(EventCalendar);\n\n  function EventCalendar(props) {\n    var _this;\n\n    _classCallCheck(this, EventCalendar);\n\n    _this = _super.call(this, props);\n\n    _this._previous = function () {\n      _this._goToPage(_this.state.index - 1);\n\n      if (_this.props.dateChanged) {\n        _this.props.dateChanged(moment(_this.props.initDate).add(_this.state.index - 1 - _this.props.size, 'days').format('YYYY-MM-DD'));\n      }\n    };\n\n    _this._next = function () {\n      _this._goToPage(_this.state.index + 1);\n\n      if (_this.props.dateChanged) {\n        _this.props.dateChanged(moment(_this.props.initDate).add(_this.state.index + 1 - _this.props.size, 'days').format('YYYY-MM-DD'));\n      }\n    };\n\n    var start = props.start ? props.start : 0;\n    var end = props.end ? props.end : 24;\n    _this.styles = styleConstructor(props.styles, (end - start) * 100);\n    _this.state = {\n      date: moment(_this.props.initDate),\n      index: _this.props.size\n    };\n    return _this;\n  }\n\n  _createClass(EventCalendar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.onRef) {\n        this.props.onRef(this);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.props.onRef) {\n        this.props.onRef(undefined);\n      }\n    }\n  }, {\n    key: \"_getItemLayout\",\n    value: function _getItemLayout(data, index) {\n      var width = this.props.width;\n      return {\n        length: width,\n        offset: width * index,\n        index: index\n      };\n    }\n  }, {\n    key: \"_getItem\",\n    value: function _getItem(events, index) {\n      var date = moment(this.props.initDate).add(index - this.props.size, 'days');\n      return _.filter(events, function (event) {\n        var eventStartTime = moment(event.start);\n        return eventStartTime >= date.clone().startOf('day') && eventStartTime <= date.clone().endOf('day');\n      });\n    }\n  }, {\n    key: \"_renderItem\",\n    value: function _renderItem(_ref) {\n      var index = _ref.index,\n          item = _ref.item;\n      var _this$props = this.props,\n          width = _this$props.width,\n          _this$props$format24h = _this$props.format24h,\n          format24h = _this$props$format24h === void 0 ? true : _this$props$format24h,\n          initDate = _this$props.initDate,\n          _this$props$scrollToF = _this$props.scrollToFirst,\n          scrollToFirst = _this$props$scrollToF === void 0 ? true : _this$props$scrollToF,\n          _this$props$start = _this$props.start,\n          start = _this$props$start === void 0 ? 0 : _this$props$start,\n          _this$props$end = _this$props.end,\n          end = _this$props$end === void 0 ? 24 : _this$props$end,\n          formatHeader = _this$props.formatHeader;\n      var date = moment(initDate).add(index - this.props.size, 'days');\n      var leftIcon = this.props.headerIconLeft ? this.props.headerIconLeft : React.createElement(Image, {\n        source: require(\"../../../../../assets/timeline_calendar/back.png\"),\n        style: this.styles.arrow,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }\n      });\n      var rightIcon = this.props.headerIconRight ? this.props.headerIconRight : React.createElement(Image, {\n        source: require(\"../../../../../assets/timeline_calendar/forward.png\"),\n        style: this.styles.arrow,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }\n      });\n      var headerText = date.format(formatHeader || 'DD MMMM YYYY');\n      return React.createElement(View, {\n        style: [this.styles.container, {\n          width: width\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 9\n        }\n      }, React.createElement(DayView, {\n        date: date,\n        index: index,\n        format24h: format24h,\n        formatHeader: this.props.formatHeader,\n        headerStyle: this.props.headerStyle,\n        renderEvent: this.props.renderEvent,\n        eventTapped: this.props.eventTapped,\n        events: item,\n        width: width,\n        styles: this.styles,\n        scrollToFirst: scrollToFirst,\n        start: start,\n        end: end,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }\n      }));\n    }\n  }, {\n    key: \"_goToPage\",\n    value: function _goToPage(index) {\n      if (index <= 0 || index >= this.props.size * 2) {\n        return;\n      }\n\n      var date = moment(this.props.initDate).add(index - this.props.size, 'days');\n      this.refs.calendar.scrollToIndex({\n        index: index,\n        animated: false\n      });\n      this.setState({\n        index: index,\n        date: date\n      });\n    }\n  }, {\n    key: \"_goToDate\",\n    value: function _goToDate(date) {\n      var earliestDate = moment(this.props.initDate).subtract(this.props.size, 'days');\n      var index = moment(date).diff(earliestDate, 'days');\n\n      this._goToPage(index);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props2 = this.props,\n          width = _this$props2.width,\n          virtualizedListProps = _this$props2.virtualizedListProps,\n          events = _this$props2.events,\n          initDate = _this$props2.initDate;\n      return React.createElement(View, {\n        style: [this.styles.container, {\n          width: width\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 9\n        }\n      }, React.createElement(VirtualizedList, _extends({\n        ref: \"calendar\",\n        windowSize: 2,\n        initialNumToRender: 2,\n        initialScrollIndex: this.props.size,\n        data: events,\n        getItemCount: function getItemCount() {\n          return _this2.props.size * 2;\n        },\n        getItem: this._getItem.bind(this),\n        keyExtractor: function keyExtractor(item, index) {\n          return index.toString();\n        },\n        getItemLayout: this._getItemLayout.bind(this),\n        horizontal: true,\n        pagingEnabled: true,\n        renderItem: this._renderItem.bind(this),\n        style: {\n          width: width\n        },\n        onMomentumScrollEnd: function onMomentumScrollEnd(event) {\n          var index = parseInt(event.nativeEvent.contentOffset.x / width);\n          var date = moment(_this2.props.initDate).add(index - _this2.props.size, 'days');\n\n          if (_this2.props.dateChanged) {\n            _this2.props.dateChanged(date.format('YYYY-MM-DD'));\n          }\n\n          _this2.setState({\n            index: index,\n            date: date\n          });\n        }\n      }, virtualizedListProps, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return EventCalendar;\n}(React.Component);\n\nEventCalendar.defaultProps = {\n  size: 30,\n  initDate: new Date(),\n  formatHeader: 'DD MMMM YYYY'\n};\nexport { EventCalendar as default };","map":{"version":3,"sources":["E:/TotNghiep/TotNghiep/src/screens/home/calendar/timeline_calendar/TimelineCalendar.js"],"names":["_","moment","React","styleConstructor","DayView","EventCalendar","props","_previous","_goToPage","state","index","dateChanged","initDate","add","size","format","_next","start","end","styles","date","onRef","undefined","data","width","length","offset","events","filter","event","eventStartTime","clone","startOf","endOf","item","format24h","scrollToFirst","formatHeader","leftIcon","headerIconLeft","require","arrow","rightIcon","headerIconRight","headerText","container","headerStyle","renderEvent","eventTapped","refs","calendar","scrollToIndex","animated","setState","earliestDate","subtract","diff","virtualizedListProps","_getItem","bind","toString","_getItemLayout","_renderItem","parseInt","nativeEvent","contentOffset","x","Component","defaultProps","Date"],"mappings":"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","sourcesContent":["// @flow\r\nimport {\r\n    VirtualizedList,\r\n    View,\r\n    TouchableOpacity,\r\n    Image,\r\n    Text,\r\n  } from 'react-native';\r\n  import _ from 'lodash';\r\n  import moment from 'moment';\r\n  import React from 'react';\r\n  \r\n  import styleConstructor from './Style';\r\n  \r\n  import DayView from './DayView';\r\n  \r\n  export default class EventCalendar extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n  \r\n      const start = props.start ? props.start : 0;\r\n      const end = props.end ? props.end : 24;\r\n  \r\n      this.styles = styleConstructor(props.styles, (end - start) * 100);\r\n      this.state = {\r\n        date: moment(this.props.initDate),\r\n        index: this.props.size,\r\n      };\r\n    }\r\n  \r\n    componentDidMount() {\r\n      if (this.props.onRef) {\r\n        this.props.onRef(this);\r\n      }\r\n    }\r\n  \r\n    componentWillUnmount() {\r\n      if (this.props.onRef) {\r\n        this.props.onRef(undefined);\r\n      }\r\n    }\r\n  \r\n    static defaultProps = {\r\n      size: 30,\r\n      initDate: new Date(),\r\n      formatHeader: 'DD MMMM YYYY',\r\n    };\r\n  \r\n    _getItemLayout(data, index) {\r\n      const { width } = this.props;\r\n      return { length: width, offset: width * index, index };\r\n    }\r\n  \r\n    _getItem(events, index) {\r\n      const date = moment(this.props.initDate).add(\r\n        index - this.props.size,\r\n        'days'\r\n      );\r\n      return _.filter(events, event => {\r\n        const eventStartTime = moment(event.start);\r\n        return (\r\n          eventStartTime >= date.clone().startOf('day') &&\r\n          eventStartTime <= date.clone().endOf('day')\r\n        );\r\n      });\r\n    }\r\n  \r\n    _renderItem({ index, item }) {\r\n      const {\r\n        width,\r\n        format24h=true,\r\n        initDate,\r\n        scrollToFirst = true,\r\n        start = 0,\r\n        end = 24,\r\n        formatHeader,\r\n      } = this.props;\r\n      const date = moment(initDate).add(index - this.props.size, 'days');\r\n  \r\n      const leftIcon = this.props.headerIconLeft ? (\r\n          this.props.headerIconLeft\r\n      ) : (\r\n          <Image source={require('../../../../../assets/timeline_calendar/back.png')} style={this.styles.arrow} />\r\n      );\r\n      const rightIcon = this.props.headerIconRight ? (\r\n          this.props.headerIconRight\r\n      ) : (\r\n          <Image source={require('../../../../../assets/timeline_calendar/forward.png')} style={this.styles.arrow} />\r\n      );\r\n  \r\n      let headerText = date.format(formatHeader || 'DD MMMM YYYY');\r\n  \r\n      return (\r\n        <View style={[this.styles.container, { width }]}>\r\n\r\n          {/* <View style={this.styles.header}>\r\n            <TouchableOpacity\r\n                style={this.styles.arrowButton}\r\n                onPress={this._previous}\r\n            >\r\n              {leftIcon}\r\n            </TouchableOpacity>\r\n\r\n            <View style={this.styles.headerTextContainer}>\r\n              <TouchableOpacity>\r\n                <Text style={this.styles.headerText}>jjj</Text>\r\n              </TouchableOpacity>\r\n            </View>\r\n\r\n            <TouchableOpacity\r\n                style={this.styles.arrowButton}\r\n                onPress={this._next}\r\n            >\r\n              {rightIcon}\r\n            </TouchableOpacity>\r\n            \r\n          </View> */}\r\n          <DayView\r\n            date={date}\r\n            index={index}\r\n            format24h={format24h}\r\n            formatHeader={this.props.formatHeader}\r\n            headerStyle={this.props.headerStyle}\r\n            renderEvent={this.props.renderEvent}\r\n            eventTapped={this.props.eventTapped}\r\n            events={item}\r\n            width={width}\r\n            styles={this.styles}\r\n            scrollToFirst={scrollToFirst}\r\n            start={start}\r\n            end={end}\r\n          />\r\n        </View>\r\n      );\r\n    }\r\n  \r\n    _goToPage(index) {\r\n      if (index <= 0 || index >= this.props.size * 2) {\r\n        return;\r\n      }\r\n      const date = moment(this.props.initDate).add(\r\n        index - this.props.size,\r\n        'days'\r\n      );\r\n      this.refs.calendar.scrollToIndex({ index, animated: false });\r\n      this.setState({ index, date });\r\n    }\r\n  \r\n    _goToDate(date) {\r\n      const earliestDate = moment(this.props.initDate).subtract(\r\n        this.props.size,\r\n        'days'\r\n      );\r\n      const index = moment(date).diff(earliestDate, 'days');\r\n      this._goToPage(index);\r\n    }\r\n  \r\n    _previous = () => {\r\n      this._goToPage(this.state.index - 1);\r\n      if (this.props.dateChanged) {\r\n        this.props.dateChanged(\r\n          moment(this.props.initDate)\r\n            .add(this.state.index - 1 - this.props.size, 'days')\r\n            .format('YYYY-MM-DD')\r\n        );\r\n      }\r\n    };\r\n  \r\n    _next = () => {\r\n      this._goToPage(this.state.index + 1);\r\n      if (this.props.dateChanged) {\r\n        this.props.dateChanged(\r\n          moment(this.props.initDate)\r\n            .add(this.state.index + 1 - this.props.size, 'days')\r\n            .format('YYYY-MM-DD')\r\n        );\r\n      }\r\n    };\r\n  \r\n    render() {\r\n      const {\r\n        width,\r\n        virtualizedListProps,\r\n        events,\r\n        initDate,\r\n      } = this.props;\r\n  \r\n      return (\r\n        <View style={[this.styles.container, { width }]}>\r\n          <VirtualizedList\r\n            ref=\"calendar\"\r\n            windowSize={2}\r\n            initialNumToRender={2}\r\n            initialScrollIndex={this.props.size}\r\n            data={events}\r\n            getItemCount={() => this.props.size * 2}\r\n            getItem={this._getItem.bind(this)}\r\n            keyExtractor={(item, index) => index.toString()}\r\n            getItemLayout={this._getItemLayout.bind(this)}\r\n            horizontal\r\n            pagingEnabled\r\n            renderItem={this._renderItem.bind(this)}\r\n            style={{ width: width }}\r\n            onMomentumScrollEnd={event => {\r\n              const index = parseInt(event.nativeEvent.contentOffset.x / width);\r\n              const date = moment(this.props.initDate).add(\r\n                index - this.props.size,\r\n                'days'\r\n              );\r\n              if (this.props.dateChanged) {\r\n                this.props.dateChanged(date.format('YYYY-MM-DD'));\r\n              }\r\n              this.setState({ index, date });\r\n            }}\r\n            {...virtualizedListProps}\r\n          />\r\n        </View>\r\n      );\r\n    }\r\n  }\r\n  "]},"metadata":{},"sourceType":"module"}