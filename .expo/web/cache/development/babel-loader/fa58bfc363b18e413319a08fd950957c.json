{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"E:\\\\TotNghiep\\\\TotNghiep\\\\src\\\\screens\\\\home\\\\forum\\\\forum_course\\\\ForumAllCourse.js\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { Fontisto, FontAwesome, MaterialIcons } from '@expo/vector-icons';\nimport { useSelector } from 'react-redux';\nimport * as forumServices from \"../../../../services/Forum\";\nimport * as dateUtils from \"../../../../utils/Date\";\n\nvar ForumAllCourseScreen = function ForumAllCourseScreen(_ref) {\n  var navigation = _ref.navigation;\n  var token = useSelector(function (state) {\n    return state.authen.token;\n  });\n  var unmounted = useRef(false);\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      dataForum = _useState2[0],\n      setDataForum = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      refresh = _useState4[0],\n      setRefresh = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isLoading = _useState6[0],\n      setIsLoading = _useState6[1];\n\n  useEffect(function () {\n    getForumAllCourse();\n    var unsubscribe = navigation.addListener('focus', function () {\n      getForumAllCourse();\n    });\n    return function () {\n      unmounted.current = true;\n      unsubscribe();\n    };\n  }, [refresh]);\n\n  var getForumAllCourse = function getForumAllCourse() {\n    setIsLoading(true);\n    fetch(\"https://hcmusemu.herokuapp.com/forum/courses/view\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        \"Authorization\": \"bearer \" + token\n      }\n    }).then(function (response) {\n      var statusCode = response.status;\n      var dataRes = response.json();\n      return Promise.all([statusCode, dataRes]);\n    }).then(function (_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 2),\n          statusCode = _ref3[0],\n          dataRes = _ref3[1];\n\n      console.log(statusCode, dataRes);\n\n      if (statusCode === 200) {\n        setDataForum(dataRes);\n      }\n\n      setIsLoading(false);\n    }).catch(function (error) {\n      return console.log('error', error);\n    });\n  };\n\n  var renderItem = function renderItem(_ref4) {\n    var item = _ref4.item;\n    return React.createElement(TouchableOpacity, {\n      style: styles.card,\n      onPress: function onPress() {\n        navigation.navigate('Content Forum', {\n          dataOfForum: item,\n          typeForum: 'course'\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }\n    }, React.createElement(View, {\n      style: styles.info,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }\n    }, React.createElement(Image, {\n      style: styles.imageUserPost,\n      source: item.AvartaOwn === \"\" || item.AvartaOwn === null ? require(\"../../../../../assets/user-icon.png\") : {\n        uri: item.AvartaOwn\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 21\n      }\n    }), React.createElement(View, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }\n    }, React.createElement(View, {\n      style: [styles.nameAndDate, {\n        flexDirection: 'row',\n        flexWrap: 'wrap'\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 25\n      }\n    }, React.createElement(Text, {\n      style: {\n        fontSize: 12,\n        fontWeight: 'bold'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 29\n      }\n    }, item.NameOwn), React.createElement(MaterialIcons, {\n      style: {\n        marginTop: 3\n      },\n      name: \"play-arrow\",\n      size: 10,\n      color: \"grey\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 29\n      }\n    }), React.createElement(Text, {\n      style: [{\n        fontWeight: '300',\n        fontSize: 10,\n        marginTop: 2\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 29\n      }\n    }, item.NameCourses)), React.createElement(Text, {\n      style: [styles.nameAndDate, {\n        fontWeight: '300',\n        fontSize: 12\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 25\n      }\n    }, dateUtils.ConvertToTimeAgo(item.time)))), React.createElement(View, {\n      tyle: [styles.info, {\n        marginBottom: 20\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      style: [styles.content],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }\n    }, item.title)), item.image !== \"\" && React.createElement(Image, {\n      style: styles.imagePost,\n      source: {\n        uri: item.image\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 39\n      }\n    }), React.createElement(View, {\n      style: styles.footerCard,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 18\n      }\n    }, item.LikeByOwn === 1 ? React.createElement(TouchableOpacity, {\n      style: styles.buttonFooter,\n      onPress: function _callee() {\n        return _regeneratorRuntime.async(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                setRefresh(!refresh);\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 42\n      }\n    }, React.createElement(Fontisto, {\n      style: {\n        marginRight: 8\n      },\n      name: \"like\",\n      size: 18,\n      color: \"blue\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 26\n      }\n    }), React.createElement(Text, {\n      style: {\n        marginTop: 3,\n        color: 'blue'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 26\n      }\n    }, item.like)) : React.createElement(TouchableOpacity, {\n      style: styles.buttonFooter,\n      onPress: function _callee2() {\n        return _regeneratorRuntime.async(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _regeneratorRuntime.awrap(forumServices.likeCoursePost(token, item.ID));\n\n              case 2:\n                setRefresh(!refresh);\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }\n    }, React.createElement(Fontisto, {\n      style: {\n        marginRight: 8\n      },\n      name: \"like\",\n      size: 18,\n      color: \"silver\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 26\n      }\n    }), React.createElement(Text, {\n      style: {\n        marginTop: 3,\n        color: 'silver'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 26\n      }\n    }, item.like)), React.createElement(TouchableOpacity, {\n      style: styles.buttonFooter,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }\n    }, React.createElement(FontAwesome, {\n      style: {\n        marginRight: 8\n      },\n      name: \"comment\",\n      size: 18,\n      color: \"silver\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 25\n      }\n    }), React.createElement(Text, {\n      style: {\n        marginTop: 2,\n        color: 'silver'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 25\n      }\n    }, item.comment))));\n  };\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, isLoading && dataForum.length === 0 && React.createElement(View, {\n    style: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 53\n    }\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"blue\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }\n  })), !isLoading && dataForum.length === 0 && React.createElement(View, {\n    style: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 54\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: '#BBBBBB'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  }, \"Kh\\xF4ng t\\xECm th\\u1EA5y di\\u1EC5n \\u0111\\xE0n m\\xF4n h\\u1ECDc n\\xE0o\")), React.createElement(FlatList, {\n    data: dataForum,\n    renderItem: renderItem,\n    keyExtractor: function keyExtractor(item, index) {\n      return index.toString();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }));\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  card: {\n    flex: 1,\n    marginTop: 10,\n    width: '100%',\n    backgroundColor: 'white',\n    borderBottomWidth: 1,\n    borderBottomColor: \"#cccccc\",\n    paddingBottom: 5,\n    paddingRight: 10\n  },\n  imageUserPost: {\n    width: 38,\n    height: 38,\n    borderRadius: 25\n  },\n  nameAndDate: {\n    flex: 1,\n    marginRight: 10,\n    marginLeft: 15\n  },\n  info: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginVertical: 10,\n    marginHorizontal: 10\n  },\n  content: {\n    marginHorizontal: 15,\n    fontSize: 12,\n    marginBottom: 10\n  },\n  imagePost: {\n    width: '100%',\n    backgroundColor: 'grey',\n    aspectRatio: 1\n  },\n  footerCard: {\n    flexDirection: 'row',\n    marginVertical: 5,\n    marginHorizontal: 15,\n    justifyContent: 'space-between'\n  },\n  buttonFooter: {\n    flexDirection: 'row'\n  }\n});\nexport default ForumAllCourseScreen;","map":{"version":3,"sources":["E:/TotNghiep/TotNghiep/src/screens/home/forum/forum_course/ForumAllCourse.js"],"names":["React","useState","useEffect","useRef","Fontisto","FontAwesome","MaterialIcons","useSelector","forumServices","dateUtils","ForumAllCourseScreen","navigation","token","state","authen","unmounted","dataForum","setDataForum","refresh","setRefresh","isLoading","setIsLoading","getForumAllCourse","unsubscribe","addListener","current","fetch","method","headers","then","response","statusCode","status","dataRes","json","Promise","all","console","log","catch","error","renderItem","item","styles","card","navigate","dataOfForum","typeForum","info","imageUserPost","AvartaOwn","require","uri","nameAndDate","flexDirection","flexWrap","fontSize","fontWeight","NameOwn","marginTop","NameCourses","ConvertToTimeAgo","time","marginBottom","content","title","image","imagePost","footerCard","LikeByOwn","buttonFooter","marginRight","color","like","likeCoursePost","ID","comment","container","length","flex","justifyContent","alignItems","index","toString","StyleSheet","create","width","backgroundColor","borderBottomWidth","borderBottomColor","paddingBottom","paddingRight","height","borderRadius","marginLeft","marginVertical","marginHorizontal","aspectRatio"],"mappings":"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","sourcesContent":["import React,{useState,useEffect,useRef} from 'react';\r\nimport { View,StyleSheet,Text,TouchableOpacity,Image,FlatList,ActivityIndicator } from 'react-native';\r\nimport { Fontisto,FontAwesome,MaterialIcons } from '@expo/vector-icons';\r\n\r\nimport {useSelector} from 'react-redux';\r\n\r\nimport * as forumServices from '../../../../services/Forum';\r\n\r\nimport * as dateUtils from '../../../../utils/Date';\r\n\r\nconst ForumAllCourseScreen =({navigation})=>{\r\n    const token = useSelector((state) => state.authen.token);\r\n    const unmounted = useRef(false);\r\n    // const dataABC= forumServices.getForum();\r\n    const [dataForum,setDataForum] = useState([]);\r\n    const [refresh,setRefresh] = useState(false);\r\n    const [isLoading,setIsLoading] = useState(true);\r\n\r\n\r\n    useEffect(() => {\r\n        getForumAllCourse();\r\n        const unsubscribe = navigation.addListener('focus', () => {\r\n            getForumAllCourse();\r\n        });\r\n        return()=>{\r\n            unmounted.current = true;\r\n            unsubscribe();\r\n        }; \r\n    },[refresh]);\r\n\r\n    const getForumAllCourse = () => {\r\n        setIsLoading(true);\r\n        fetch(\"https://hcmusemu.herokuapp.com/forum/courses/view\", {\r\n            method: \"POST\",\r\n            headers: {\r\n              \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n              \"Authorization\": `bearer ${token}`,\r\n            },\r\n        }) .then((response) => {\r\n            const statusCode = response.status;\r\n            const dataRes = response.json();\r\n            return Promise.all([statusCode, dataRes]);\r\n        }).then(([statusCode, dataRes]) => {\r\n            console.log(statusCode,dataRes);\r\n            if(statusCode === 200){\r\n                setDataForum(dataRes);\r\n            }\r\n            setIsLoading(false);\r\n        }).catch(error => console.log('error', error));\r\n    }\r\n\r\n    const renderItem = ({item})=>(\r\n        <TouchableOpacity style={styles.card}\r\n                onPress={() =>{\r\n                    navigation.navigate('Content Forum',{\r\n                        dataOfForum:item,\r\n                        typeForum:'course',\r\n                    });\r\n                }}>\r\n                <View style={styles.info}>\r\n                    <Image style={styles.imageUserPost} source={ item.AvartaOwn === \"\" || item.AvartaOwn === null ? require(\"../../../../../assets/user-icon.png\") : {uri : item.AvartaOwn}}/>\r\n                    <View>\r\n                        \r\n                        <View style={[styles.nameAndDate,{flexDirection:'row',flexWrap:'wrap'}]}>\r\n                            <Text style={{fontSize:12,fontWeight:'bold'}}>{item.NameOwn}</Text>\r\n                            <MaterialIcons style={{marginTop:3}} name=\"play-arrow\" size={10} color=\"grey\" />\r\n                            <Text style={[{fontWeight:'300',fontSize:10,marginTop:2}]}>{item.NameCourses}</Text>\r\n                        </View>\r\n                        <Text style={[styles.nameAndDate,{fontWeight:'300',fontSize:12}]}>{dateUtils.ConvertToTimeAgo(item.time)}</Text>\r\n                    </View>\r\n\r\n                </View>\r\n                \r\n                <View tyle={[styles.info,{marginBottom:20}]}>      \r\n                    <Text style={[styles.content]}>{item.title}</Text>                \r\n                </View>\r\n\r\n                {item.image !== \"\" && <Image style={styles.imagePost} source={{uri:item.image}}/>}\r\n\r\n                 <View style={styles.footerCard}>\r\n\r\n                 {/* Grey if not like and blue if like */}\r\n                 \r\n                 {item.LikeByOwn === 1 ? <TouchableOpacity style={styles.buttonFooter}\r\n                         onPress={async()=>{\r\n                            //await forumServices.likePost(token,item.ID);\r\n                            setRefresh(!refresh);\r\n                        }}>\r\n                         <Fontisto style={{marginRight:8}} name=\"like\" size={18} color=\"blue\" />\r\n                         <Text style={{marginTop:3,color:'blue'}}>{item.like}</Text>\r\n                    </TouchableOpacity>\r\n                    :\r\n                    <TouchableOpacity style={styles.buttonFooter}\r\n                         onPress={async()=>{\r\n                            await forumServices.likeCoursePost(token,item.ID);\r\n                            setRefresh(!refresh);\r\n                        }}>\r\n                         <Fontisto style={{marginRight:8}} name=\"like\" size={18} color=\"silver\" />\r\n                         <Text style={{marginTop:3,color:'silver'}}>{item.like}</Text>\r\n                    </TouchableOpacity>\r\n                }\r\n\r\n\r\n                    <TouchableOpacity style={styles.buttonFooter}>\r\n                        <FontAwesome style={{marginRight:8}} name=\"comment\" size={18} color=\"silver\" />\r\n                        <Text style={{marginTop:2,color:'silver'}}>{item.comment}</Text>\r\n                    </TouchableOpacity>\r\n                </View>\r\n            </TouchableOpacity>\r\n    )\r\n\r\n    return (\r\n        <View style={styles.container}>\r\n            {isLoading && dataForum.length === 0 && <View style={{flex:1,justifyContent: 'center',alignItems: 'center'}}>\r\n                <ActivityIndicator size=\"large\" color=\"blue\"/>\r\n            </View>}\r\n\r\n            {!isLoading && dataForum.length === 0 && <View style={{flex: 1,justifyContent: 'center',alignItems: 'center'}}>\r\n                    <Text style={{color:'#BBBBBB'}}>\r\n                        Không tìm thấy diễn đàn môn học nào \r\n                    </Text>\r\n                </View>\r\n            }\r\n            \r\n\r\n            <FlatList\r\n                data={dataForum}\r\n                renderItem={renderItem}\r\n                keyExtractor = {(item,index) => index.toString()}\r\n            />\r\n            \r\n        </View>\r\n    )\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n    },\r\n\r\n    card: {\r\n        flex:1,\r\n        marginTop:10,\r\n        width: '100%',\r\n        backgroundColor:'white',\r\n        borderBottomWidth:1,\r\n        borderBottomColor: \"#cccccc\",\r\n        paddingBottom:5,\r\n        paddingRight:10\r\n    },\r\n\r\n    imageUserPost:{\r\n        width:38,\r\n        height:38,\r\n        borderRadius:25,\r\n    },\r\n\r\n    nameAndDate: {\r\n        flex:1,\r\n        marginRight:10,\r\n        marginLeft:15\r\n    },\r\n\r\n    info: {\r\n        flexDirection:'row',\r\n        alignItems: 'center',\r\n        marginVertical:10,\r\n        marginHorizontal:10\r\n    },\r\n\r\n    content: {\r\n        marginHorizontal:15,\r\n        fontSize:12,\r\n        marginBottom:10,\r\n    },\r\n\r\n    imagePost:{\r\n        width:'100%',\r\n        backgroundColor:'grey',\r\n        aspectRatio: 1\r\n    },\r\n\r\n    footerCard:{\r\n        flexDirection:'row',\r\n        marginVertical:5,\r\n        marginHorizontal:15,\r\n        justifyContent: 'space-between'\r\n    },\r\n\r\n    buttonFooter:{\r\n        flexDirection:'row'\r\n    }\r\n});\r\n\r\nexport default ForumAllCourseScreen;"]},"metadata":{},"sourceType":"module"}